(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const l of n.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function e(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=e(s);fetch(s.href,n)}})();class u{constructor(t){this.remainingTime=t,this.timer=null,this.onTick=null,this.onTimeout=null}start(t,e){this.onTick=t,this.onTimeout=e,this.timer=setInterval(()=>{var i,s;this.remainingTime--,this.remainingTime<=0?(this.stop(),this.remainingTime=0,(i=this.onTimeout)==null||i.call(this)):(s=this.onTick)==null||s.call(this)},1e3)}stop(){this.timer&&(clearInterval(this.timer),this.timer=null)}reset(t){this.stop(),this.remainingTime=t}subtractTime(t){var e,i;this.remainingTime=Math.max(0,this.remainingTime-t),this.remainingTime===0?(this.stop(),(e=this.onTimeout)==null||e.call(this)):(i=this.onTick)==null||i.call(this)}isRunning(){return this.timer!==null}getRemainingTime(){return this.remainingTime}}function p(a){const t=Math.floor(a/60),e=a%60;return`${String(t).padStart(2,"0")}:${String(e).padStart(2,"0")}`}class y{constructor(t){this.settings=t,this.player1Clock=null,this.player2Clock=null,this.activePlayer=null,this.onTick=null,this.onTimeout=null,this.reset()}reset(){const t=this.settings.getTimeInSeconds();this.player1Clock=new u(t),this.player2Clock=new u(t),this.activePlayer=null,this.stop()}start(){this.activePlayer||(this.activePlayer=1),(this.activePlayer===1?this.player1Clock:this.player2Clock).start(()=>{var e;return(e=this.onTick)==null?void 0:e.call(this)},()=>{var e;return(e=this.onTimeout)==null?void 0:e.call(this,this.activePlayer)})}stop(){var t,e;(t=this.player1Clock)==null||t.stop(),(e=this.player2Clock)==null||e.stop()}switchPlayer(){this.stop(),this.activePlayer=this.activePlayer===1?2:1,this.start()}getFormattedTime(t){const e=t===1?this.player1Clock:this.player2Clock;return p(e.getRemainingTime())}setOnTick(t){this.onTick=t}setOnTimeout(t){this.onTimeout=t}get isRunning(){var t,e;return((t=this.player1Clock)==null?void 0:t.isRunning())||((e=this.player2Clock)==null?void 0:e.isRunning())}}class f{constructor(){this.elements=this.cacheElements(),this.preloadedImage=new Image}cacheElements(){return{player1:document.getElementById("player1"),player2:document.getElementById("player2"),pass1:document.getElementById("pass1"),pass2:document.getElementById("pass2"),startBtn:document.getElementById("startBtn"),resetBtn:document.getElementById("resetBtn"),settingsBtn:document.getElementById("settingsBtn"),settingsModal:document.getElementById("settingsModal"),saveSettings:document.getElementById("saveSettings"),cancelSettings:document.getElementById("cancelSettings"),timeInput:document.getElementById("timeInput"),slideshow:document.getElementById("slideshow"),categorySelect:document.getElementById("categorySelect")}}get(t){return this.elements[t]?this.elements[t]:(console.warn(`Element "${t}" not found in cached elements`),null)}updatePlayerTime(t,e){const i=this.elements[`player${t}`];if(i){const s=i.querySelector(".time");s&&(s.textContent=e)}}setStartButtonText(t){const e=this.elements.startBtn;e&&(e.textContent=t)}updatePlayerStatus(t,e){const i=this.elements.player1,s=this.elements.player2;i&&s&&(i.classList.remove("active","inactive"),s.classList.remove("active","inactive"),t?(i.classList.add("active"),s.classList.add("inactive")):e&&(i.classList.add("inactive"),s.classList.add("active")))}markTimeout(t){const e=this.elements[`player${t}`];e&&e.classList.add("timeout")}updateSlideshowImage(t){const e=this.elements.slideshow;e&&(this.preloadedImage.onload=()=>{e.style.opacity="0",setTimeout(()=>{e.src=t,e.style.opacity="1"},300)},this.preloadedImage.src=t)}showSettingsModal(){const t=this.elements.settingsModal;t&&t.classList.remove("hidden")}hideSettingsModal(){const t=this.elements.settingsModal;t&&t.classList.add("hidden")}}const T={default:{path:"/images",images:["start.jpg"]},classic:{path:"/images/classic",images:["image1.jpg","image2.jpg","image3.jpg"]},modern:{path:"/images/modern",images:["image1.jpg","image2.jpg","image3.jpg"]},masters:{path:"/images/masters",images:["image1.jpg","image2.jpg","image3.jpg"]}};class S{constructor(){this.categories=Object.entries(T).reduce((t,[e,i])=>(t[e]=i.images.map(s=>`${i.path}/${s}`),t),{}),this.currentCategory="default",this.currentIndex=0}setCategory(t){return this.categories[t]?(this.currentCategory=t,this.currentIndex=0,this.getCurrentImage()):null}next(){const t=this.categories[this.currentCategory];return this.currentIndex=(this.currentIndex+1)%t.length,this.getCurrentImage()}getCurrentImage(){return this.categories[this.currentCategory][this.currentIndex]}reset(){return this.currentIndex=0,this.getCurrentImage()}getCategories(){return Object.keys(this.categories)}}class I{constructor(t,e){this.timer=t,this.settings=e,this.elements=new f,this.slideshow=new S,this.setupEventListeners()}initialize(){this.updateDisplay(),this.timer.setOnTick(()=>this.updateDisplay()),this.timer.setOnTimeout(t=>this.handleTimeout(t)),this.updateSlideshow()}setupEventListeners(){const t=this.elements.get("startBtn"),e=this.elements.get("resetBtn"),i=this.elements.get("settingsBtn"),s=this.elements.get("saveSettings"),n=this.elements.get("cancelSettings"),l=this.elements.get("player1"),c=this.elements.get("player2"),o=this.elements.get("pass1"),h=this.elements.get("pass2"),m=this.elements.get("categorySelect");t&&t.addEventListener("click",()=>this.handleStartClick()),e&&e.addEventListener("click",()=>this.handleResetClick()),i&&i.addEventListener("click",()=>this.showSettings()),s&&s.addEventListener("click",()=>this.saveSettings()),n&&n.addEventListener("click",()=>this.hideSettings()),l&&l.addEventListener("click",()=>this.handlePlayerClick(1)),c&&c.addEventListener("click",()=>this.handlePlayerClick(2)),o&&o.addEventListener("click",r=>this.handlePassClick(r,1)),h&&h.addEventListener("click",r=>this.handlePassClick(r,2)),m&&m.addEventListener("change",r=>{const d=this.slideshow.setCategory(r.target.value);d&&this.elements.updateSlideshowImage(d)}),document.addEventListener("keydown",r=>{r.code==="Space"?this.handleStartClick():r.code==="KeyR"&&this.handleResetClick()})}handlePassClick(t,e){if(t.stopPropagation(),!this.timer.isRunning)return;(e===1?this.timer.player1Clock:this.timer.player2Clock).subtractTime(3),this.updateDisplay(),this.updateSlideshow()}handleStartClick(){this.timer.isRunning?(this.timer.stop(),this.elements.setStartButtonText("Start")):(this.timer.start(),this.elements.setStartButtonText("Pause")),this.updateDisplay()}handleResetClick(){this.timer.reset(),this.elements.setStartButtonText("Start"),this.updateDisplay(),this.slideshow.reset(),this.updateSlideshow()}handlePlayerClick(t){this.timer.isRunning&&(t===1&&this.timer.activePlayer===1||t===2&&this.timer.activePlayer===2)&&(this.timer.switchPlayer(),this.updateDisplay(),this.updateSlideshow())}handleTimeout(t){this.elements.markTimeout(t),this.elements.setStartButtonText("Start")}updateDisplay(){this.elements.updatePlayerTime(1,this.timer.getFormattedTime(1)),this.elements.updatePlayerTime(2,this.timer.getFormattedTime(2)),this.elements.updatePlayerStatus(this.timer.activePlayer===1&&this.timer.isRunning,this.timer.activePlayer===2&&this.timer.isRunning)}updateSlideshow(){const t=this.slideshow.next();this.elements.updateSlideshowImage(t)}showSettings(){const t=this.elements.get("timeInput");t&&(t.value=this.settings.getTimeInMinutes()),this.elements.showSettingsModal()}hideSettings(){this.elements.hideSettingsModal()}saveSettings(){const t=this.elements.get("timeInput");if(t){const e=parseInt(t.value,10);e>0&&(this.settings.setTimeInMinutes(e),this.timer.reset(),this.updateDisplay())}this.hideSettings()}}class v{constructor(){this.timeInMinutes=10}setTimeInMinutes(t){this.timeInMinutes=t}getTimeInMinutes(){return this.timeInMinutes}getTimeInSeconds(){return this.timeInMinutes*60}}const g=new v,k=new y(g),C=new I(k,g);C.initialize();
